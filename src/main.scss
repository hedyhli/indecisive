@use "bulma/sass" as bulma with (
	$info: hsla(197, 93%, 29%, 1),
	$link: hsla(187, 97%, 29%, 1),
	$primary: hsla(174, 100%, 33%, 1),
	$success: hsla(167, 77%, 57%, 0.49),
	$warning: hsla(63, 69%, 85%, 1),
	$danger: hsl(0deg 87.23% 74.77%),
	$box-shadow: none,
);

:root {
	/* light mode colors */
	--color-info: hsla(197, 93%, 29%, 1);
	--color-link: hsla(187, 97%, 29%, 1);
	--color-primary: hsla(174, 100%, 45%, 1);
	--color-success: hsla(167, 77%, 57%, 0.49);
	--color-warning: hsla(63, 69%, 85%, 1);
	--color-danger: hsl(0deg 87.23% 74.77%);
	--bg: #ffffff;
	--text: #0a0a0a;

	/* card colors follow Bulma presets but exposed as CSS variables */
	--card-bg: #{bulma.$white-ter};
	--card-text: var(--text);

    --table-bg: var(--card-bg);
    --table-text: var(--text);
    --table-head-bg: #{bulma.$grey-lighter};
}

/* follow system preference for dark mode */
@media (prefers-color-scheme: dark) {
	:root {
		/* tuned dark values */
		--color-info: hsla(197, 93%, 55%, 1);
		--color-link: hsla(187, 97%, 60%, 1);
		--color-primary: hsla(174, 100%, 33%, 1);
		--color-success: hsla(167, 77%, 45%, 0.6);
		--color-warning: hsla(50, 20%, 25%, 1);
		--color-danger: hsl(0deg 70% 65%);
		--bg: #0b0b0d;
		--text: #e6e6e6;

		/* tuned dark card values */
		--card-bg: #{bulma.$black-ter};
		--card-text: var(--text);

    --table-bg: #{bulma.$black-bis};
    --table-text: var(--text);
    --table-head-bg: #{bulma.$dark};
	}
}

/* ensure base page picks up variables */
body {
	background-color: var(--bg);
	color: var(--text);
	/* small transition for smooth change if user toggles */
	transition: background-color .2s ease, color .2s ease;
}

footer {
	color: #{bulma.$grey-lighter};
}

/* Map Bulma helper classes and provide themed card helpers */
.card-themed {
	background-color: var(--card-bg) !important;
	color: var(--card-text) !important;
}
.card-header-themed {
	color: var(--card-text) !important;
}

@mixin table-select-cell($gearing: "no", $first-child: "no") {
  $ge: if($gearing == "gearing", ".gearing", ":not(.gearing)");
  $fc: if($first-child == "first-child", ":first-child", "");
  $bfc: if($first-child == "first-child" or $first-child == "middle", ":first-child", "");
  thead > tr#{$ge} > th#{$fc},
  tbody > tr#{$ge} > td#{$bfc},
  tfoot > tr#{$ge} > th#{$fc} {
    @content;
  }
}

.table.card-themed {
  @include table-select-cell("no") {
    background-color: var(--table-bg) !important;
    color: var(--table-text) !important;
  }
  @include table-select-cell("no", "middle") {
    background-color: var(--table-head-bg) !important;
  }
  @include table-select-cell("no", "first-child") {
    // box-shadow: 2px 0 5px -2px rgba(0,0,0,0.2);
    border-right: 2px solid red;
  }
  @include table-select-cell("gearing") {
    background-color: var(--card-bg) !important;
    color: var(--card-text) !important;
    font-weight: normal;
  }
  @include table-select-cell("gearing", "middle") {
    background-color: var(--card-bg) !important;
    color: var(--card-text) !important;
  }
}
